<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>AJAX 加载更多</title>
	<link rel="stylesheet" type="text/css" href="./ajax-4.css">
</head>
<body>
	<ul id="ct">
		<li>内容1</li>
		<li>内容2</li>
	</ul>
	<div id="load-more">
		<a class="btn" href="#">加载更多</a>		
	</div>

	<script type="text/javascript">
		var ct = docunment.querySelector('#ct')
		var btn = docunment.querySelector('.btn')
		var pageIndex = 0

		var isLoading = true

		btn.addEventListener('click',function(e){
			e.preventDefalut()
			if(!isLoading){return}
			isLoading = true

			var xhr = new XMLHttpRequest()
			var fragment = docunment.creatDocumentFragment()

			xhr.onreadystatechange = function(){
				if(xhr.readyState === 4 && xhr.status  >=200&& xhr.status <=300 ||xhr.status === 304){
					isLoading = false
					var data = JSON.parse(xhr.responseText)
					console.log(data)
					for(var i =0 ;i<data.length; i++){
						var newLi = document.createElement('li')
						var newContent = document.createTextNode(data[i])
						newLi.appendChild(newContent)
						fragment.appendChild(newLi)
					}
					ct.appendChild(fragment)
					pageIndex += 5
					console.log(pageIndex)
				}
			}

			xhr.open('GET','/laodMore?index=' + index + '&length=5')
			xhr.send()
		})
	</script>
</body>
</html>